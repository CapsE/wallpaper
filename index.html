<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Wallpaper</title>
</head>
<body>
<canvas id="wrapper">

</canvas>

<script src="jquery-3.1.1.min.js"></script>
<script src="perlin.js"></script>
<script>
    var offset = 0;
    var countX = window.innerWidth;
    var countY = window.innerHeight;
    var ctx = document.getElementById("wrapper").getContext("2d");
    var x = Math.random() * countX;
    var y = Math.random() * countY;
    var lastX = x;
    var lastY = y;
    var speed = 8;
    $(document).ready(function(){

        var $body = $("#wrapper");
        noise.seed(Math.random());
        $("#wrapper").attr("width", countX);
        $("#wrapper").attr("height", countY);
        setInterval(function () {
            step();
        }, 10);

    });

    function step() {
        offset++;
        var r = parseInt(((noise.simplex3((offset) / 200, 1000, 0) +1)/2)*255);
        var g = parseInt(((noise.simplex3((offset) / 200, 1000, 100)+1)/2)*255);
        var b = parseInt(((noise.simplex3((offset) / 200, 1000, 200)+1)/2)*255);

        x +=  noise.simplex2((offset) / 200, 300)*speed;
        y +=  noise.simplex2((offset) / 200, 400)*speed;

        if(x > countX){
            x -= countX;
        }
        if(y > countY){
            y -= countY;
        }
        if(x < 0){
            x += countX;
        }
        if(y < 0){
            y += countY;
        }

        ctx.fillStyle="rgba(255,255,255,0.1)";
        ctx.fillRect(0,0,countX, countY);

        ctx.beginPath();
        ctx.arc(x,y,50,0,2*Math.PI);
        ctx.fillStyle="rgb(" + r + "," + g + "," + b + ")";
        ctx.fill();

    }

    $(document).click(function(){
        step();
    });

</script>
<style>
    html, body{
        padding:0px;
        margin:0px;
        width:100%;
        height:100%;
        overflow:hidden;
    }
</style>
</body>
</html>