<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Wallpaper</title>
</head>
<body>
<div id="wrapper">

</div>

<script src="jquery-3.1.1.min.js"></script>
<script src="perlin.js"></script>
<script>
    var offset = 0;
    var count = window.innerWidth / 100 +3;
    $(document).ready(function(){

        var $body = $("#wrapper");
        noise.seed(Math.random());


        for (var x = 0; x < count; x++) {
            for (var y = 0; y < 11; y++) {
                var r = (noise.simplex3(x / 100, y / 100, 0) +1)/2;
                var g = (noise.simplex3(x / 100, y / 100, 100)+1)/2;
                var b = (noise.simplex3(x / 100, y / 100, 200)+1)/2;

                var $rect = $("<div class='rect'></div>");
                $rect.attr("id", x + "-" + y);
                $rect.css({
                    "top": y*100,
                    "left": x*99,
                    "background": "rgba(" + Math.round(r*255) + "," + Math.round(g*255) + "," + Math.round(b*255) + ",1)"
                });
                $body.append($rect);
            }
        }

        setInterval(function(){
            step();
        }, 6000);
    });

    function step() {
        offset++;
        for (var x = 0; x < count; x++) {
            for (var y = 0; y < 11; y++) {
                var r = (noise.simplex3((x + offset) / 100, y / 100, 0) +1)/2;
                var g = (noise.simplex3((x + offset) / 100, y / 100, 100)+1)/2;
                var b = (noise.simplex3((x + offset) / 100, y / 100, 200)+1)/2;

                var $rect = $("#" + x + "-" + y);
                $rect.css({
                    "background": "rgba(" + Math.round(r*255) + "," + Math.round(g*255) + "," + Math.round(b*255) + ",1)"
                });
            }
        }
    }

    $(document).click(function(){
        noise.seed(Math.random());
        offset = 0;
        step();
    });

</script>
<style>
    @keyframes move {
       0%{transform: translate(0,0)}
       100%{transform: translate(-100px,0)}
    }

    html, body{
        padding:0px;
        margin:0px;
        width:100%;
        height:100%;
        overflow:hidden;
    }
    .rect{
        position: absolute;
        width:100px;
        height:100px;

        animation: move;
        animation-duration: 6s;
        animation-iteration-count: infinite;
        animation-timing-function: linear;
    }

    #wrapper{

    }
</style>
</body>
</html>